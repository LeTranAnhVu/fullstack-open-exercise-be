(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),u=n(7),s=n(5),l=n(2),m=n(4),i=n.n(m),f="/api/persons",p=function(){return i.a.get(f)},d=function(e){return i.a.post(f,e)},b=function(e){return i.a.delete("".concat(f,"/").concat(e))},h=function(e,t){return i.a.put("".concat(f,"/").concat(e),t)},v=function(e){var t=e.searchName,n=e.filterByName;return r.a.createElement("div",null,"Filter shown with ",r.a.createElement("input",{value:t,type:"text",onChange:function(e){n(e.target.value)}}))},E=function(e){var t=e.name,n=e.number,a=e.updateNewValue,c=e.updatePhoneBook;return r.a.createElement("form",null,r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,type:"text",name:"name",onChange:a})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:n,type:"text",name:"number",onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{onClick:c,type:"submit"},"add")))},y=function(e){var t=e.person,n=e.onDelete;return r.a.createElement("li",null,t.name," ",t.number," ",r.a.createElement("button",{onClick:function(){return n(t)}},"delete"))},g=function(e){var t=e.persons,n=e.onDeletePerson;return r.a.createElement("ul",null,t.map((function(e){return r.a.createElement(y,{key:e.id,person:e,onDelete:n})})))},j=(n(40),function(e){var t=e.message,n=e.type;return r.a.createElement("div",{className:"message ".concat(n)},r.a.createElement("p",null,t))}),O=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),m=Object(l.a)(o,2),i=m[0],f=m[1],y=Object(a.useState)(""),O=Object(l.a)(y,2),w=O[0],k=O[1],N=Object(a.useState)(""),S=Object(l.a)(N,2),C=S[0],D=S[1],x=Object(a.useState)(""),B=Object(l.a)(x,2),P=B[0],J=B[1],V=Object(a.useState)({message:null,type:null}),A=Object(l.a)(V,2),F=A[0],I=A[1],M=function(e){if(e){var t=new RegExp(e,"i"),a=n.filter((function(e){return e.name.match(t)}));f(Object(s.a)(a))}else f(Object(s.a)(n));J(e)},R=function(){p().then((function(e){var t=e.data;t&&c(Object(s.a)(t))})).catch((function(e){console.error(e)}))};Object(a.useEffect)((function(){R()}),[]),Object(a.useEffect)((function(){M("")}),[n]);var q=function(){k(""),D("")};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),F.message&&r.a.createElement(j,{message:F.message,type:F.type}),r.a.createElement(v,{searchName:P,filterByName:M}),r.a.createElement("h3",null,"Add New"),r.a.createElement(E,{name:w,number:C,updateNewValue:function(e){var t=e.target.name,n=e.target.value;"name"===t?k(n):"number"===t&&D(n)},updatePhoneBook:function(e){e.preventDefault();var t=w.trim(),a=C.trim();if(t&&a){var r=n.find((function(e){return e.name===t}));if(r)window.confirm("".concat(t," is already added to phonebook, replace the old number with new one"))&&h(r.id,Object(u.a)({},r,{number:a})).then((function(e){e.data;I({message:"update success",type:"success"}),q()})).catch((function(e){e.response&&e.response.data&&e.response.data.error?I({message:"".concat(e.response.data.error),type:"error"}):I({message:"Cannot update user",type:"error"})})).finally((function(){return R()}));else d({name:t,number:a}).then((function(e){var t=e.data;t.id&&(c([].concat(Object(s.a)(n),[Object(u.a)({},t)])),I({message:"added ".concat(t.name),type:"success"}),q())})).catch((function(e){e.response&&e.response.data&&e.response.data.error?I({message:"".concat(e.response.data.error),type:"error"}):I({message:"cannot added new person",type:"error"})}))}}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(g,{onDeletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b(e.id).then((function(t){t.data;I({message:"removed ".concat(e.name),type:"error"})})).catch((function(t){I({message:"information of ".concat(e.name," has already been removed from server"),type:"error"})})).finally((function(){R()}))},persons:i}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.aeffa3b0.chunk.js.map