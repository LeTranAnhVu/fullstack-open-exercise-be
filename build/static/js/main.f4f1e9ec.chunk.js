(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{18:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(17),o=n.n(r),u=n(7),l=n(5),m=n(2),i=n(4),s=n.n(i),f="/api/persons",d=function(){return s.a.get(f)},p=function(e){return s.a.post(f,e)},b=function(e){return s.a.delete("".concat(f,"/").concat(e))},h=function(e,t){return s.a.put("".concat(f,"/").concat(e),t)},v=function(e){var t=e.searchName,n=e.filterByName;return c.a.createElement("div",null,"Filter shown with ",c.a.createElement("input",{value:t,type:"text",onChange:function(e){n(e.target.value)}}))},E=function(e){var t=e.name,n=e.number,a=e.updateNewValue,r=e.updatePhoneBook;return c.a.createElement("form",null,c.a.createElement("div",null,"name: ",c.a.createElement("input",{value:t,type:"text",name:"name",onChange:a})),c.a.createElement("div",null,"number: ",c.a.createElement("input",{value:n,type:"text",name:"number",onChange:a})),c.a.createElement("div",null,c.a.createElement("button",{onClick:r,type:"submit"},"add")))},y=function(e){var t=e.person,n=e.onDelete;return c.a.createElement("li",null,t.name," ",t.number," ",c.a.createElement("button",{onClick:function(){return n(t)}},"delete"))},g=function(e){var t=e.persons,n=e.onDeletePerson;return c.a.createElement("ul",null,t.map((function(e){return c.a.createElement(y,{key:e.id,person:e,onDelete:n})})))},j=(n(40),function(e){var t=e.message,n=e.type;return c.a.createElement("div",{className:"message ".concat(n)},c.a.createElement("p",null,t))}),O=function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)([]),i=Object(m.a)(o,2),s=i[0],f=i[1],y=Object(a.useState)(""),O=Object(m.a)(y,2),w=O[0],k=O[1],N=Object(a.useState)(""),S=Object(m.a)(N,2),D=S[0],x=S[1],B=Object(a.useState)(""),C=Object(m.a)(B,2),P=C[0],J=C[1],V=Object(a.useState)({message:null,type:null}),A=Object(m.a)(V,2),F=A[0],I=A[1],M=function(e){if(e){var t=new RegExp(e,"i"),a=n.filter((function(e){return e.name.match(t)}));f(Object(l.a)(a))}else f(Object(l.a)(n));J(e)},R=function(){d().then((function(e){var t=e.data;t&&r(Object(l.a)(t))})).catch((function(e){console.error(e)}))};Object(a.useEffect)((function(){R()}),[]),Object(a.useEffect)((function(){M("")}),[n]);return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),F.message&&c.a.createElement(j,{message:F.message,type:F.type}),c.a.createElement(v,{searchName:P,filterByName:M}),c.a.createElement("h3",null,"Add New"),c.a.createElement(E,{name:w,number:D,updateNewValue:function(e){var t=e.target.name,n=e.target.value;"name"===t?k(n):"number"===t&&x(n)},updatePhoneBook:function(e){e.preventDefault();var t=w.trim(),a=D.trim();if(t&&a){var c=n.find((function(e){return e.name===t}));if(c)window.confirm("".concat(t," is already added to phonebook, replace the old number with new one"))&&h(c.id,Object(u.a)({},c,{number:a})).then((function(e){e.data;I({message:"update success",type:"success"})})).catch((function(e){I({message:"information of ".concat(c.name," has already been removed from server"),type:"error"})})).finally((function(){return R()}));else p({name:t,number:a}).then((function(e){var t=e.data;t.id&&(r([].concat(Object(l.a)(n),[Object(u.a)({},t)])),I({message:"added ".concat(t.name),type:"success"}))})).catch((function(e){I({message:"cannot added new person",type:"error"})})),k(""),x("")}}}),c.a.createElement("h2",null,"Numbers"),c.a.createElement(g,{onDeletePerson:function(e){window.confirm("Delete ".concat(e.name,"?"))&&b(e.id).then((function(e){e.data})).catch((function(t){I({message:"information of ".concat(e.name," has already been removed from server"),type:"error"})})).finally((function(){R()}))},persons:s}))};o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.f4f1e9ec.chunk.js.map